/*!
  * Resistance - A javascript flow controller 
  * v2.0.0
  * https://github.com/jgallen23/resistance
  * copyright JGA 2011
  * MIT License
  */
var series=require("./series"),parallel=require("./parallel"),queue=require("./queue"),Resistance=function(){if(!(this instanceof Resistance))return new Resistance;this.type="series",this.flow=[]};Resistance.prototype.context=function(e){return this.context=e,this},Resistance.prototype.use=function(e){return this.flow.push(e),this},Resistance.prototype.series=function(){return this.type="series",this},Resistance.prototype.parallel=function(){return this.type="parallel",this},Resistance.prototype.queue=function(e){return this.type="queue",this.queueData=e,this},Resistance.prototype.end=function(e){this.type=="series"?series(this.flow,e,this.context):this.type=="parallel"?parallel(this.flow,e,this.context):this.type=="queue"&&queue(this.queueData,this.flow,e)},module.exports=Resistance